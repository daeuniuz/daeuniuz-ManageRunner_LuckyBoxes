<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëœë¤ë°•ìŠ¤ êµ¬ì„± ë„ìš°ë¯¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .configuration-card {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .configuration-card.active {
            border-color: #3b82f6; /* blue-500 */
            box-shadow: 0 4px 14px 0 rgba(0, 118, 255, 0.39);
        }
        .item-list-button {
            transition: background-color 0.2s ease-in-out;
        }
        .item-list-button:hover {
            background-color: #eef2ff; /* indigo-50 */
        }
        /* ìŠ¤í¬ë¡¤ë°” ë””ìì¸ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* slate-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* slate-400 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">ğŸ ëœë¤ë°•ìŠ¤ êµ¬ì„± ë„ìš°ë¯¸</h1>
            <p class="mt-2 text-slate-600">íŒë§¤ê°€: 3,500ì› | ëª©í‘œ ë‹¨ê°€: <span class="font-bold text-indigo-600">3,182ì›</span></p>
        </header>

        <div class="flex flex-col md:flex-row gap-8">

            <!-- Left Side: Configurations -->
            <main class="w-full md:w-2/3">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold">êµ¬ì„± ëª©ë¡</h2>
                    <button id="add-config-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full shadow-lg transition-transform transform hover:scale-105">
                        + ìƒˆ êµ¬ì„± ì¶”ê°€
                    </button>
                </div>
                <div id="configurations-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Configuration cards will be inserted here -->
                </div>
                 <div id="no-config-message" class="text-center py-16 bg-white rounded-lg shadow-md mt-4">
                    <p class="text-slate-500">'+ ìƒˆ êµ¬ì„± ì¶”ê°€' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì²« ë²ˆì§¸ êµ¬ì„±ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
                </div>
            </main>

            <!-- Right Side: Item List -->
            <aside class="w-full md:w-1/3">
                <div class="bg-white p-4 rounded-lg shadow-md sticky top-8">
                    <p class="text-sm text-slate-500 text-right mb-2">ì œì‘ì: 1416 ì´ë‹¤ì€</p>
                    <h2 class="text-2xl font-bold mb-4 border-b pb-2">ë¬¼í’ˆ ëª©ë¡</h2>
                    <div id="item-list" class="max-h-[70vh] overflow-y-auto pr-2">
                        <!-- Item list will be inserted here -->
                    </div>
                </div>
            </aside>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA ---
            const targetCost = 3182;
            // ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì—‘ì…€ íŒŒì¼ì—ì„œ ì¶”ì¶œí•œ ë°ì´í„°
            const items = [
                { name: 'í—ˆë‹ˆë²„í„°ì¹©', bundleSize: 12, pricePerItem: 1306 },
                { name: 'ì´ˆì½”ë¹„ ì´ˆì½”ë°”', bundleSize: 15, pricePerItem: 811 },
                { name: 'ì¸„íŒŒì¶¥ìŠ¤ ì‚¬ì›Œë²¨íŠ¸', bundleSize: 48, pricePerItem: 383 },
                { name: 'ì ¤ë¦¬ìŠ¤íŠ¸ë¡œìš°', bundleSize: 80, pricePerItem: 228 },
                { name: 'ë¯¸ë‹ˆ í—ˆë‹ˆë²„í„° ì•„ëª¬ë“œ', bundleSize: 15, pricePerItem: 860 },
                { name: 'í”„ë§ê¸€ìŠ¤ ì–‘íŒŒë§›', bundleSize: 12, pricePerItem: 1003 },
                { name: 'ëª°í‹°ì ¸ìŠ¤', bundleSize: 26, pricePerItem: 519 },
                { name: 'í•˜ë¦¬ë³´ ì ¤ë¦¬', bundleSize: 100, pricePerItem: 159 },
                { name: 'ì˜¤ì˜ˆìŠ¤ ë¯¸ë‹ˆ', bundleSize: 24, pricePerItem: 412 },
                { name: 'ABC ì´ˆì½”ì¿ í‚¤', bundleSize: 4, pricePerItem: 4020 },
                { name: 'íŠ¸ë¡¤ë¦¬ ì ¤ë¦¬', bundleSize: 50, pricePerItem: 397 },
                { name: 'ì—ë‚™ ë¼ë©´ê³¼ì', bundleSize: 60, pricePerItem: 522 },
                { name: 'ë¡œíˆ¬ìŠ¤', bundleSize: 100, pricePerItem: 98 },
                { name: 'ë„¤ëª¨ìŠ¤ë‚µ', bundleSize: 30, pricePerItem: 409 },
                { name: 'í¬ì¥ ë´‰íˆ¬', bundleSize: 1, pricePerItem: 100 }
            ];

            // --- STATE ---
            let configurations = [];
            let activeConfigurationId = null;
            let nextConfigNumber = 1;

            // --- DOM ELEMENTS ---
            const itemListContainer = document.getElementById('item-list');
            const configurationsContainer = document.getElementById('configurations-container');
            const addConfigBtn = document.getElementById('add-config-btn');
            const noConfigMessage = document.getElementById('no-config-message');

            // --- FUNCTIONS ---

            /** ë¬¼í’ˆ ëª©ë¡ì„ í™”ë©´ ì˜¤ë¥¸ìª½ì— ë Œë”ë§í•©ë‹ˆë‹¤. */
            const renderItemList = () => {
                itemListContainer.innerHTML = '';
                items.forEach(item => {
                    const button = document.createElement('button');
                    button.className = 'item-list-button w-full text-left p-3 border-b rounded-md';
                    button.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="font-semibold">${item.name}</span>
                            <span class="text-sm text-slate-500">${item.pricePerItem.toLocaleString()}ì›/ê°œ (ì´ ${item.bundleSize}ê°œ)</span>
                        </div>
                    `;
                    button.onclick = () => addItemToActiveConfiguration(item);
                    itemListContainer.appendChild(button);
                });
            };

            /** êµ¬ì„± ëª©ë¡ì„ í™”ë©´ ì™¼ìª½ì— ë Œë”ë§í•©ë‹ˆë‹¤. */
            const renderConfigurations = () => {
                configurationsContainer.innerHTML = '';
                if (configurations.length === 0) {
                    noConfigMessage.style.display = 'block';
                    configurationsContainer.style.display = 'none';
                } else {
                    noConfigMessage.style.display = 'none';
                    configurationsContainer.style.display = 'grid';
                }

                configurations.forEach(config => {
                    const card = document.createElement('div');
                    card.className = `configuration-card bg-white p-5 rounded-lg shadow-md border-2 ${config.id === activeConfigurationId ? 'active' : 'border-transparent'}`;
                    card.onclick = () => setActiveConfiguration(config.id);

                    const difference = config.totalCost - targetCost;
                    const diffColor = difference > 0 ? 'text-red-500' : 'text-blue-500';
                    const diffSign = difference > 0 ? '+' : '';

                    let itemsHtml = '<p class="text-sm text-slate-500 mb-2">ì¶”ê°€ëœ ë¬¼í’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                    if (Object.keys(config.items).length > 0) {
                        itemsHtml = '<ul class="space-y-1 text-sm mb-3">';
                        for (const itemName in config.items) {
                            const item = config.items[itemName];
                            itemsHtml += `<li class="flex justify-between"><span>${itemName} (${item.quantity}ê°œ)</span> <span>${(item.price * item.quantity).toLocaleString()}ì›</span></li>`;
                        }
                        itemsHtml += '</ul>';
                    }

                    card.innerHTML = `
                        <h3 class="text-xl font-bold mb-3 border-b pb-2">${config.name}</h3>
                        <div class="min-h-[80px]">${itemsHtml}</div>
                        <div class="mt-4 pt-4 border-t">
                            <div class="flex justify-between items-center mb-1">
                                <span class="font-semibold">í•©ê³„:</span>
                                <span class="font-bold text-lg">${config.totalCost.toLocaleString()}ì›</span>
                            </div>
                            <div class="flex justify-between items-center text-sm">
                                <span class="text-slate-600">ë‹¨ê°€ ì°¨ì•¡:</span>
                                <span class="font-semibold ${diffColor}">${diffSign}${difference.toLocaleString()}ì›</span>
                            </div>
                        </div>
                        <button class="delete-config-btn w-full mt-4 text-xs text-red-500 hover:text-red-700 opacity-50 hover:opacity-100 transition-opacity" data-id="${config.id}">êµ¬ì„± ì‚­ì œ</button>
                    `;
                    configurationsContainer.appendChild(card);
                });
                
                // ì‚­ì œ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                document.querySelectorAll('.delete-config-btn').forEach(btn => {
                    btn.onclick = (e) => {
                        e.stopPropagation(); // ì¹´ë“œ ì „ì²´ê°€ í´ë¦­ë˜ëŠ” ê²ƒì„ ë°©ì§€
                        const idToDelete = parseInt(e.target.dataset.id);
                        deleteConfiguration(idToDelete);
                    };
                });
            };
            
            /** ìƒˆë¡œìš´ êµ¬ì„±ì„ ì¶”ê°€í•©ë‹ˆë‹¤. */
            const addConfiguration = () => {
                const newConfig = {
                    id: Date.now(),
                    name: `êµ¬ì„± ${nextConfigNumber++}`,
                    items: {}, // { 'ë¹¼ë¹¼ë¡œ': { price: 1230, quantity: 2 }, ... }
                    totalCost: 0,
                };
                configurations.push(newConfig);
                setActiveConfiguration(newConfig.id);
            };
            
            /** íŠ¹ì • IDì˜ êµ¬ì„±ì„ ì‚­ì œí•©ë‹ˆë‹¤. */
            const deleteConfiguration = (id) => {
                configurations = configurations.filter(config => config.id !== id);
                if (activeConfigurationId === id) {
                    activeConfigurationId = configurations.length > 0 ? configurations[0].id : null;
                }
                renderConfigurations();
            };

            /** í™œì„±í™”ëœ êµ¬ì„±ì„ ì„¤ì •í•©ë‹ˆë‹¤. */
            const setActiveConfiguration = (id) => {
                activeConfigurationId = id;
                renderConfigurations();
            };

            /** í™œì„±í™”ëœ êµ¬ì„±ì— ë¬¼í’ˆì„ ì¶”ê°€í•©ë‹ˆë‹¤. */
            const addItemToActiveConfiguration = (item) => {
                if (!activeConfigurationId) {
                    // Custom modal would be better than alert
                    const modal = document.createElement('div');
                    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    modal.innerHTML = `
                        <div class="bg-white rounded-lg p-8 shadow-xl">
                            <p class="text-lg font-semibold">ì•Œë¦¼</p>
                            <p class="mt-2 text-slate-600">ë¨¼ì € êµ¬ì„±í•  ë°•ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!</p>
                            <button id="modal-close-btn" class="mt-6 bg-indigo-600 text-white py-2 px-4 rounded-lg w-full hover:bg-indigo-700">í™•ì¸</button>
                        </div>
                    `;
                    document.body.appendChild(modal);
                    document.getElementById('modal-close-btn').onclick = () => {
                        document.body.removeChild(modal);
                    };
                    return;
                }

                const activeConfig = configurations.find(c => c.id === activeConfigurationId);
                if (activeConfig) {
                    if (activeConfig.items[item.name]) {
                        activeConfig.items[item.name].quantity++;
                    } else {
                        activeConfig.items[item.name] = {
                            price: item.pricePerItem,
                            quantity: 1,
                        };
                    }
                    recalculateTotalCost(activeConfig);
                    renderConfigurations();
                }
            };
            
            /** êµ¬ì„±ì˜ ì´ ë¹„ìš©ì„ ë‹¤ì‹œ ê³„ì‚°í•©ë‹ˆë‹¤. */
            const recalculateTotalCost = (config) => {
                let total = 0;
                for (const itemName in config.items) {
                    const item = config.items[itemName];
                    total += item.price * item.quantity;
                }
                config.totalCost = total;
            };
            
            /** alert() ëŒ€ì‹  ì‚¬ìš©í•  ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ì„ í‘œì‹œí•©ë‹ˆë‹¤. */
            const showCustomAlert = (message) => {
                const alertBox = document.createElement('div');
                alertBox.className = 'fixed top-5 right-5 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg z-50';
                alertBox.innerHTML = `<span class="block sm:inline">${message}</span>`;
                document.body.appendChild(alertBox);
                setTimeout(() => {
                    alertBox.style.transition = 'opacity 0.5s ease';
                    alertBox.style.opacity = '0';
                    setTimeout(() => document.body.removeChild(alertBox), 500);
                }, 2000);
            }


            // --- INITIALIZATION ---
            addConfigBtn.addEventListener('click', addConfiguration);
            renderItemList();
            renderConfigurations();
        });
    </script>
</body>
</html>

